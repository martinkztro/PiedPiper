---
import Header from '../components/Header.astro'; 
import '../styles/historical.css';
---

<Header /> 

<div class="carousel-container">
  <div class="carousel">
    <!-- Carrusel con las imágenes -->
    <div class="carousel-item">
      <div class="image-item central" onclick="changeImage('ballena-jorobada')">
        <img src="/statues/ballena-jorobada.webp" alt="Estatua de la ballena jorobada" class="carousel-image" id="ballena-jorobada">

        <!-- Información en columnas -->
        <div class="description">
          <div class="info-column">
            <div class="info-item">
              <strong>Autor:</strong> Octavio Gonzalez Gutierrez
            </div>
            <div class="info-item">
              <strong>Material:</strong> Bronce
            </div>
            <div class="info-item">
              <strong>Ano:</strong> 2004
            </div>
          </div>

          <div class="info-column">
            <div class="info-item">
              <strong>Descripcion:</strong> Escultura de bronce que alcanza una altura maxima de 2.60 metros, con una posicion de salto con las aletas extendidas, sostenida en un tubo metalico que se soporta en una base circular de concreto de 40 cm de alto...
            </div>
          </div>

          <div class="info-column">
            <div class="info-item">
              <strong>Historia:</strong> La ballena jorobada o yubarta es una especie de cetacio que se reproduce cada temporada en las costas de Baja California Sur, convirtiendose en un espectaculo turístico de especial atencion.
            </div>
          </div>

          <!-- Icono de audio -->
          <button class="audio-icon" onclick="toggleAudio('audioContainer1')">
            <img src="/statues/bocina.png" alt="Reproducir Audio" class="audio-icon-img" />
          </button>

          <!-- Contenedor de audio -->
          <div class="audio-container" id="audioContainer1" style="display: none;">
            <audio id="audioPlayer1" controls>
              <source id="audioSource" src="/audio/La_Ballena_Jorobada.mp3" type="audio/mp3">
              <source id="audioSourceOgg" src="/audio/La_Ballena_Jorobada.ogg" type="audio/ogg">
              Tu navegador no soporta el elemento de audio.
            </audio>
          </div>
        </div>
      </div>
    </div>

    <!-- Más slides aquí -->
  </div>

  <!-- Flechas para cambiar de imagen -->
  <button class="prev" onclick="moveSlide(-1)">&#10094;</button>
  <button class="next" onclick="moveSlide(1)">&#10095;</button>
</div>

<script>
  let slideIndex = 0;
  const slides = document.getElementsByClassName("carousel-item");

  function showSlides() {
    for (let i = 0; i < slides.length; i++) {
      (slides[i] as HTMLElement).style.opacity = "0";  // Ocultamos todos los slides
    }

    (slides[slideIndex] as HTMLElement).style.opacity = "1";  // Mostramos el slide actual
  }

  function moveSlide(step: number) {
    slideIndex += step; 
    if (slideIndex >= slides.length) slideIndex = 0; 
    if (slideIndex < 0) slideIndex = slides.length - 1; 

    showSlides();
  }

  function changeImage(id: string) {
    const images = document.querySelectorAll('.carousel-image');
    images.forEach(img => {
      (img as HTMLElement).style.transform = 'scale(1)';  // Reestablecer el tamaño
    });
    const activeImage = document.getElementById(id);
    if (activeImage) {
      activeImage.style.transform = 'scale(1.3)';  // Aumentar el tamaño de la imagen seleccionada
    }
  }

  setInterval(() => {
    moveSlide(1);  // Cambiar automáticamente a la siguiente imagen cada 5 segundos
  }, 2000);

  showSlides();  // Mostrar la primera imagen cuando la página carga

  // Función para mostrar u ocultar el reproductor de audio
  function toggleAudio(containerId: string) {
    const audioContainer = document.getElementById(containerId);
    if (audioContainer) {
      if (audioContainer.style.display === "none") {
        audioContainer.style.display = "block";
      } else {
        audioContainer.style.display = "none";
      }
    }
  }
</script>
